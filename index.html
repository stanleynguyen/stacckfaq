<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Stacck FAQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="col-md-offset-3 col-md-6 col-xs-12">
      <form id="form" style="padding-bottom: 5px;">
        <fieldset class="form-group">
          <label for="question">Question</label>
          <input type="text" class="form-control" id="question" placeholder="Question..." required>
        </fieldset>
        <fieldset class="form-group">
          <label for="answer">Answer</label>
          <textarea class="form-control" id="answer" placeholder="Answer..." required></textarea>
        </fieldset>
        <button class="btn btn-primary"><i class="glyphicon glyphicon-send"></i> Submit</button>
      </form>
      <div class="alert alert-success" style="display: none;"><strong>Success!</strong> Your FAQ is successfully added to our knowledgebase!</div>
      <div class="alert alert-danger" style="display: none;"><strong>Error!</strong> Please try again!</div>
    </div>
  </div>
  <script>
    $(document).ready(function() {
        $('#form').submit(function(event) {
            event.preventDefault();
            var send = {
                question: $('#question').val(),
                answer: $('#answer').val()
            };
            $.post('/api/new', send)
                .done(function(result) {
                    if (result === 'success') {
                        $('.alert-success').show();
                        $('#question').val('');
                        $('#answer').val('');
                        setTimeout(function() {
                            $('.alert-success').hide();
                        }, 5000);
                    } else {
                        $('.alert-danger').show();
                    }
                })
                .fail(function(err) {
                    $('.alert-danger').show();
                })
        });
    });
  </script>
</body>